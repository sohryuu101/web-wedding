import{u as j,a as _,b as N,r as g,c as v,j as e}from"./index-DxtRYQh2.js";import{u as f}from"./useMutation-CIf0dpzc.js";import{L as d,I as l,B as y}from"./createLucideIcon-D8SGIuxB.js";import{C,a as k,b as w,c as S,d as P}from"./card-teYlAk6U.js";import{H as E}from"./heart-RNtVqrYd.js";import{P as I}from"./protected-route-QG8oraKv.js";function M(){const c=j(),x=_(),{user:i}=N(),[n,h]=g.useState({bride_name:"",groom_name:"",wedding_date:"",theme:"Rose Garden",custom_slug:""}),[t,u]=g.useState({}),r=f({mutationFn:a=>v.createInvitation(a),onSuccess:()=>{x.invalidateQueries({queryKey:["invitations"]}),c({to:"/dashboard"})},onError:a=>{console.error("Create invitation error:",a)}}),p=()=>{const a={};return n.bride_name.trim()||(a.bride_name="Bride's name is required"),n.groom_name.trim()||(a.groom_name="Groom's name is required"),u(a),Object.keys(a).length===0},b=async a=>{var s;if(a.preventDefault(),!p())return;const o={bride_name:n.bride_name.trim(),groom_name:n.groom_name.trim(),wedding_date:new Date().toISOString().split("T")[0],theme:"Modern Elegance",...((s=n.custom_slug)==null?void 0:s.trim())&&{custom_slug:n.custom_slug.trim()}};r.mutate(o)},m=(a,o)=>{h(s=>({...s,[a]:o})),t[a]&&u(s=>({...s,[a]:""}))};return e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:e.jsx("div",{className:"w-full max-w-2xl",children:e.jsxs(C,{children:[e.jsxs(k,{className:"text-center",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx(E,{className:"h-12 w-12 text-rose-500"})}),e.jsx(w,{className:"text-2xl",children:"Buat Undangan Pernikahan Anda"}),e.jsxs(S,{children:["Selamat datang ",i==null?void 0:i.name,"! Mari mulai dengan detail dasar.",e.jsx("br",{}),"Anda dapat menambahkan detail lainnya setelah membuat undangan."]})]}),e.jsx(P,{children:e.jsxs("form",{onSubmit:b,className:"space-y-6",children:[r.error&&e.jsx("div",{className:"p-3 text-sm text-red-600 bg-red-50 border border-red-200 rounded-md",children:r.error instanceof Error?r.error.message:"Gagal membuat undangan"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"bride_name",children:"Nama Pengantin Wanita *"}),e.jsx(l,{id:"bride_name",value:n.bride_name,onChange:a=>m("bride_name",a.target.value),placeholder:"Masukkan nama pengantin wanita",className:t.bride_name?"border-red-500":""}),t.bride_name&&e.jsx("p",{className:"text-xs text-red-600",children:"Nama pengantin wanita wajib diisi"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"groom_name",children:"Nama Pengantin Pria *"}),e.jsx(l,{id:"groom_name",value:n.groom_name,onChange:a=>m("groom_name",a.target.value),placeholder:"Masukkan nama pengantin pria",className:t.groom_name?"border-red-500":""}),t.groom_name&&e.jsx("p",{className:"text-xs text-red-600",children:"Nama pengantin pria wajib diisi"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"custom_slug",children:"URL Kustom"}),e.jsxs("div",{className:"flex",children:[e.jsx("span",{className:"inline-flex items-center px-3 rounded-l-md border border-r-0 border-gray-300 bg-gray-50 text-gray-500 text-sm",children:"/invitation/"}),e.jsx(l,{id:"custom_slug",value:n.custom_slug,onChange:a=>m("custom_slug",a.target.value),placeholder:"url-undangan-anda",className:"rounded-l-none"})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Ini akan menjadi URL undangan pernikahan Anda. Biarkan kosong untuk membuat otomatis dari nama."})]}),e.jsx("div",{className:"flex gap-4 pt-4",children:e.jsx(y,{type:"submit",disabled:r.isPending,className:"flex-1",children:r.isPending?"Membuat...":"Buat Undangan Pernikahan"})})]})})]})})})}const L=function(){return e.jsx(I,{children:e.jsx(M,{})})};export{L as component};
